(this["webpackJsonpreact-hooks-redux-toolkit-example-crud"]=this["webpackJsonpreact-hooks-redux-toolkit-example-crud"]||[]).push([[0],{43:function(e,t,n){},45:function(e,t,n){},76:function(e,t,n){"use strict";n.r(t);var c,r,a=n(1),i=n(20),s=n.n(i),o=(n(43),n(16)),l=n(3),u=(n(44),n(45),n(5)),d=n(6),b=n(12),j=n(7),p=n(26),O=n(4),h=n.n(O),f=n(13),m=n(9),x=n(36),v=n.n(x).a.create({baseURL:"http://localhost:5000",headers:{"Content-type":"application/json"}}),g={getAll:function(){return v.get("/tutorials")},get:function(e){return v.get("/tutorials/".concat(e))},create:function(e){return v.post("/tutorials",e)},update:function(e,t){return v.put("/tutorials/".concat(e),t)},remove:function(e){return v.delete("/tutorials/".concat(e))},removeAll:function(){return v.delete("/tutorials")},findByTitle:function(e){return v.get("/tutorials?title=".concat(e))}},k=Object(m.b)("tutorials/create",function(){var e=Object(f.a)(h.a.mark((function e(t){var n,c,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.title,c=t.description,e.next=3,g.create({title:n,description:c});case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),N=Object(m.b)("tutorials/retrieve",Object(f.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.getAll();case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})))),y=Object(m.b)("tutorials/update",function(){var e=Object(f.a)(h.a.mark((function e(t){var n,c,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,c=t.data,e.next=3,g.update(n,c);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),w=Object(m.b)("tutorials/delete",function(){var e=Object(f.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,e.next=3,g.remove(n);case 3:return e.abrupt("return",{id:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),S=Object(m.b)("tutorials/deleteAll",Object(f.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.removeAll();case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})))),C=Object(m.b)("tutorials/findByTitle",function(){var e=Object(f.a)(h.a.mark((function e(t){var n,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.title,e.next=3,g.findByTitle(n);case 3:return c=e.sent,e.abrupt("return",c.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),T=Object(m.c)({name:"tutorial",initialState:[],extraReducers:(c={},Object(u.a)(c,k.fulfilled,(function(e,t){e.push(t.payload.message)})),Object(u.a)(c,N.fulfilled,(function(e,t){return Object(p.a)(t.payload.message)})),Object(u.a)(c,y.fulfilled,(function(e,t){var n=e.findIndex((function(e){return e.id===t.payload.id}));e[n]=Object(d.a)(Object(d.a)({},e[n]),t.payload)})),Object(u.a)(c,w.fulfilled,(function(e,t){var n=e.findIndex((function(e){return e.id===t.payload.id}));e.splice(n,1)})),Object(u.a)(c,S.fulfilled,(function(e,t){return[]})),Object(u.a)(c,C.fulfilled,(function(e,t){return Object(p.a)(t.payload)})),c)}).reducer,F=n(0),I=function(){var e={id:null,title:"",description:"",published:!1},t=Object(a.useState)(e),n=Object(b.a)(t,2),c=n[0],r=n[1],i=Object(a.useState)(!1),s=Object(b.a)(i,2),o=s[0],l=s[1],p=Object(j.b)(),O=function(e){var t=e.target,n=t.name,a=t.value;r(Object(d.a)(Object(d.a)({},c),{},Object(u.a)({},n,a)))};return Object(F.jsx)("div",{className:"submit-form",children:o?Object(F.jsxs)("div",{children:[Object(F.jsx)("h4",{children:"You submitted successfully!"}),Object(F.jsx)("button",{className:"btn btn-success",onClick:function(){r(e),l(!1)},children:"Add"})]}):Object(F.jsxs)("div",{children:[Object(F.jsxs)("div",{className:"form-group",children:[Object(F.jsx)("label",{htmlFor:"title",children:"Title"}),Object(F.jsx)("input",{type:"text",className:"form-control",id:"title",required:!0,value:c.title||"",onChange:O,name:"title"})]}),Object(F.jsxs)("div",{className:"form-group",children:[Object(F.jsx)("label",{htmlFor:"description",children:"Description"}),Object(F.jsx)("input",{type:"text",className:"form-control",id:"description",required:!0,value:c.description||"",onChange:O,name:"description"})]}),Object(F.jsx)("button",{onClick:function(){var e=c.title,t=c.description;p(k({title:e,description:t})).unwrap().then((function(e){console.log(e),r({id:e.id,title:e.title,description:e.description,published:e.published}),l(!0)})).catch((function(e){console.log(e)}))},className:"btn btn-success",children:"Submit"})]})})},P=function(e){var t=Object(a.useState)({id:null,title:"",description:"",published:!1}),n=Object(b.a)(t,2),c=n[0],r=n[1],i=Object(a.useState)(""),s=Object(b.a)(i,2),o=s[0],l=s[1],p=Object(j.b)();Object(a.useEffect)((function(){var t;t=e.match.params.id,g.get(t).then((function(e){console.log(e.data.data[0]),r(e.data.data[0])})).catch((function(e){console.log(e)}))}),[e.match.params.id]);var O=function(e){var t=e.target,n=t.name,a=t.value;r(Object(d.a)(Object(d.a)({},c),{},Object(u.a)({},n,a)))},h=function(e){var t={id:c.id,title:c.title,description:c.description,published:e};p(y({id:c.id,data:t})).unwrap().then((function(t){console.log(t),r(Object(d.a)(Object(d.a)({},c),{},{published:e})),l("The status was updated successfully!")})).catch((function(e){console.log(e)}))};return Object(F.jsx)("div",{children:c?Object(F.jsxs)("div",{className:"edit-form",children:[Object(F.jsx)("h4",{children:"Tutorial"}),Object(F.jsxs)("form",{children:[Object(F.jsxs)("div",{className:"form-group",children:[Object(F.jsx)("label",{htmlFor:"title",children:"Title"}),Object(F.jsx)("input",{type:"text",className:"form-control",id:"title",name:"title",value:c.title,onChange:O})]}),Object(F.jsxs)("div",{className:"form-group",children:[Object(F.jsx)("label",{htmlFor:"description",children:"Description"}),Object(F.jsx)("input",{type:"text",className:"form-control",id:"description",name:"description",value:c.description,onChange:O})]}),Object(F.jsxs)("div",{className:"form-group",children:[Object(F.jsx)("label",{children:Object(F.jsx)("strong",{children:"Status:"})}),c.published?"Published":"Pending"]})]}),c.published?Object(F.jsx)("button",{className:"badge badge-primary mr-2",onClick:function(){return h(!1)},children:"UnPublish"}):Object(F.jsx)("button",{className:"badge badge-primary mr-2",onClick:function(){return h(!0)},children:"Publish"}),Object(F.jsx)("button",{className:"badge badge-danger mr-2",onClick:function(){p(w({id:c._id})).unwrap().then((function(){e.history.push("/tutorials")})).catch((function(e){console.log(e)}))},children:"Delete"}),Object(F.jsx)("button",{type:"submit",className:"badge badge-success",onClick:function(){p(y({id:c._id,data:c})).unwrap().then((function(t){console.log(t),l("The tutorial was updated successfully!"),setTimeout((function(){return e.history.push("/tutorials")}),2e3)})).catch((function(e){console.log(e)}))},children:"Update"}),Object(F.jsx)("p",{children:o})]}):Object(F.jsxs)("div",{children:[Object(F.jsx)("br",{}),Object(F.jsx)("p",{children:"Please click on a Tutorial..."})]})})},A=function(){var e=Object(a.useState)(null),t=Object(b.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(-1),i=Object(b.a)(r,2),s=i[0],l=i[1],u=Object(a.useState)(""),d=Object(b.a)(u,2),p=d[0],O=d[1],h=Object(j.c)((function(e){return e.tutorials})),f=Object(j.b)(),m=Object(a.useCallback)((function(){f(N())}),[f]);Object(a.useEffect)((function(){m()}),[m]);var x=function(){c(null),l(-1)};return Object(F.jsxs)("div",{className:"list row",children:[Object(F.jsx)("div",{className:"col-md-8",children:Object(F.jsxs)("div",{className:"input-group mb-3",children:[Object(F.jsx)("input",{type:"text",className:"form-control",placeholder:"Search by title",value:p,onChange:function(e){var t=e.target.value;O(t)}}),Object(F.jsx)("div",{className:"input-group-append",children:Object(F.jsx)("button",{className:"btn btn-outline-secondary",type:"button",onClick:function(){x(),f(C({title:p}))},children:"Search"})})]})}),Object(F.jsxs)("div",{className:"col-md-6",children:[Object(F.jsx)("h4",{children:"Tutorials List"}),Object(F.jsx)("ul",{className:"list-group",children:h&&h.map((function(e,t){return Object(F.jsx)("li",{className:"list-group-item "+(t===s?"active":""),onClick:function(){return function(e,t){c(e),l(t)}(e,t)},children:e.title},t)}))}),Object(F.jsx)("button",{className:"m-3 btn btn-sm btn-danger",onClick:function(){f(S()).then((function(e){x()})).catch((function(e){console.log(e)}))},children:"Remove All"})]}),Object(F.jsx)("div",{className:"col-md-6",children:n?Object(F.jsxs)("div",{children:[Object(F.jsx)("h4",{children:"Tutorial"}),Object(F.jsxs)("div",{children:[Object(F.jsx)("label",{children:Object(F.jsx)("strong",{children:"Title:"})})," ",n.title]}),Object(F.jsxs)("div",{children:[Object(F.jsx)("label",{children:Object(F.jsx)("strong",{children:"Description:"})})," ",n.description]}),Object(F.jsxs)("div",{children:[Object(F.jsx)("label",{children:Object(F.jsx)("strong",{children:"Status:"})})," ",n.published?"Published":"Pending"]}),Object(F.jsx)(o.b,{to:"/tutorials/"+n._id,className:"badge badge-warning",children:"Edit"})]}):Object(F.jsxs)("div",{children:[Object(F.jsx)("br",{}),Object(F.jsx)("p",{children:"Please click on a Tutorial..."})]})})]})},L=function(){var e=Object(f.a)(h.a.mark((function e(t,n){var c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,{method:"post",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")},body:JSON.stringify(n)});case 2:return c=e.sent,e.next=5,c.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),B=Object(m.b)("signupuser",function(){var e=Object(f.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L("/signup",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),D=Object(m.b)("signinuser",function(){var e=Object(f.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L("/signin",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),E=Object(m.c)({name:"user",initialState:{token:"",loading:!1,error:""},reducers:{addToken:function(e,t){e.token=localStorage.getItem("token")},logout:function(e,t){e.token=null,localStorage.removeItem("token")}},extraReducers:(r={},Object(u.a)(r,B.fulfilled,(function(e,t){var n=t.payload,c=n.error,r=n.message;e.loading=!1,e.error=c||r})),Object(u.a)(r,B.pending,(function(e,t){e.loading=!0})),Object(u.a)(r,D.pending,(function(e,t){e.loading=!0})),Object(u.a)(r,D.fulfilled,(function(e,t){var n=t.payload,c=n.error,r=n.token;e.loading=!1,c?e.error=c:(e.token=r,localStorage.setItem("token",r))})),r)}),q=E.actions,R=(q.addToken,q.logout),U=E.reducer,J=function(){var e=Object(a.useState)({email:"",password:""}),t=Object(b.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(!1),i=Object(b.a)(r,2),s=i[0],o=i[1],p=Object(j.b)(),O=function(e){var t=e.target,r=t.name,a=t.value;c(Object(d.a)(Object(d.a)({},n),{},Object(u.a)({},r,a)))},h=localStorage.getItem("token");if(h)return Object(F.jsx)(l.a,{to:"/"});if("user"===h)return Object(F.jsx)(l.a,{to:"/tutorials"});return Object(F.jsx)("div",{className:"submit-form",children:s?Object(F.jsx)("div",{children:Object(F.jsx)("h4",{children:"Login successfully!"})}):Object(F.jsxs)("div",{children:[Object(F.jsxs)("div",{className:"form-group",children:[Object(F.jsx)("label",{htmlFor:"title",children:"User name"}),Object(F.jsx)("input",{type:"text",className:"form-control",id:"title",required:!0,value:n.email||"",onChange:O,name:"email"})]}),Object(F.jsxs)("div",{className:"form-group",children:[Object(F.jsx)("label",{htmlFor:"password",children:"Password"}),Object(F.jsx)("input",{type:"text",className:"form-control",id:"password",required:!0,value:n.password||"",onChange:O,name:"password"})]}),Object(F.jsx)("button",{className:"btn btn-success",onClick:function(){return function(){var e=n.email,t=n.password;p(D({email:e,password:t})).unwrap().then((function(e){o(!0)})).catch((function(e){console.log(e)}))}()},children:"Login"})]})})},_=function(){var e=Object(j.b)(),t=Object(l.g)();localStorage.removeItem("token");return Object(a.useEffect)((function(){e(R()),t.push("/login")}),[]),null},z=n(38),K=["component"];var Y=function(e){var t=e.component,n=Object(z.a)(e,K),c=localStorage.getItem("token");return console.log("this",c),Object(F.jsx)(l.b,Object(d.a)(Object(d.a)({},n),{},{render:function(e){return c?Object(F.jsx)(t,Object(d.a)({},e)):Object(F.jsx)(l.a,{to:"/signin"})}}))};var G=function(){Object(j.c)((function(e){return e.user}));var e=localStorage.getItem("token");return Object(F.jsxs)(o.a,{children:[Object(F.jsxs)("nav",{className:"navbar navbar-expand navbar-dark bg-dark",children:[Object(F.jsx)("a",{href:"/tutorials",className:"navbar-brand",children:"bezKoder"}),Object(F.jsxs)("div",{className:"navbar-nav mr-auto",children:[Object(F.jsx)("li",{className:"nav-item",children:Object(F.jsx)(o.b,{to:"/tutorials",className:"nav-link",children:"Tutorials"})}),Object(F.jsx)("li",{className:"nav-item",children:Object(F.jsx)(o.b,{to:"/add",className:"nav-link",children:"Add"})}),e?Object(F.jsx)(F.Fragment,{children:Object(F.jsx)("li",{className:"nav-item",children:Object(F.jsx)(o.b,{to:"/logout",className:"nav-link",children:"logout"})})}):Object(F.jsx)(F.Fragment,{children:Object(F.jsx)("li",{className:"nav-item",children:Object(F.jsx)(o.b,{to:"/login",className:"nav-link",children:"Login"})})})]})]}),Object(F.jsx)("div",{className:"container mt-3",children:Object(F.jsxs)(l.d,{children:["//",Object(F.jsx)(l.b,{exact:!0,path:["/","/tutorials"],component:A}),"// ",Object(F.jsx)(l.b,{exact:!0,path:"/add",component:I}),Object(F.jsx)(Y,{path:"/add",component:I}),"//",Object(F.jsx)(l.b,{path:"/tutorials/:id",component:P}),Object(F.jsx)(l.b,{path:"/login",component:J}),Object(F.jsx)(l.b,{path:"/logout",component:_})]})})]})},H=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,77)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),c(e),r(e),a(e),i(e)}))},M={tutorials:T,user:U},Q=Object(m.a)({reducer:M,devTools:!0});s.a.render(Object(F.jsx)(j.a,{store:Q,children:Object(F.jsx)(G,{})}),document.getElementById("root")),H()}},[[76,1,2]]]);
//# sourceMappingURL=main.19d00c1d.chunk.js.map